<!doctype html>
<html lang="en">
    
    <head>
        
        <link rel="stylesheet" type="text/css" href="css/common.css">
        
        <title>BlueDash</title>
        
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="js/cookies.js"></script><script src="js/tba.js"></script>
        
        <script>
            function doRefresh() {
                setTeam();
                refreshTBA();
            }
            
            function doAutoRefresh() {
                if (jQuery(".autoRefresh:checked").val() == "autoRefresh") {
                    refreshTBA();
                }
            }
            
            function doUpdateRefreshButton() {
                var element = document.getElementById("teamSetter");
                if (jQuery(".autoRefresh:checked").val() == "autoRefresh") {
                    element.innerHTML = "Set Team #";
                } else {
                    element.innerHTML = "Refresh";
                }
            }
            
            setInterval(doAutoRefresh, 1000);
            setInterval(doUpdateRefreshButton, 10);
        </script>
        
    </head>
    
    <body>
        
        <div id="topDiv">
            
            <a href="https://www.thebluealliance.com/"><div id="logoDiv"></div></a>
        
            <div id="settingDiv">
                <table>
                    <tr>
                        <td>API Key: </td>
                        <td><input type="text" name="apiKeyBox"> </td>
                        <td width=115><button type="button" onclick="setApiKey()" id="apiSetter">Set API Key</button></td>
                        <td width=150><input type="checkbox" class="autoRefresh" value="autoRefresh"> Auto-Refresh</td>
                    </tr>
                    <tr>
                        <td>Team No: </td>
                        <td><input type="number" name="teamBox"> </td>
                        <td><button type="button" onclick="doRefresh()" id="teamSetter">Refresh</button></td>
                        <td style="padding-left: 10px;"><b>Last Updated:</b> <span id="lastUpdated"><i>Never</i></span></td>
                    </tr>
                </table>
                <i>This key (and the team number) will be saved in a cookie for further use.</i>
            </div>
            
        </div>
        
        <br><br>
        
        <div id="dataDiv">
            <table>
                <tr>
                    <td width=125><b>API Status:</b> </td>
                    <td><span id="apiStatus">[No data yet]</span></td>
                </tr>
                <tr>
                    <td><b>Team Name:</b> </td>
                    <td><span id="teamName"></span></td>
                </tr>
                <tr>
                    <td><b>Current Event:</b> </td>
                    <td><span id="currentEvent"></span></td>
                </tr>
            </table>
        </div>
    
    </body>
    
</html>