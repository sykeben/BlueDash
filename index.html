<!DOCTYPE html>
<html>
    
    <head>
        
        <title>BlueDash</title>
        <link rel="stylesheet" type="text/css" href="css/common.css">
        
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script src="js/cookies.js"></script>
        <script src="js/tba.js"></script>
        
        <script>
            function doRefresh() {
                setTeam();
                if (jQuery(".autoRefresh:checked").val() == "autoRefresh") {
                    refreshTBA();
                }
            }
            
            function doAutoRefresh() {
                if (jQuery(".autoRefresh:checked").val() == "autoRefresh") {
                    refreshTBA();
                }
            }
            
            function doUpdateRefreshButton() {
                var element = document.getElementById("teamSetter");
                if (jQuery(".autoRefresh:checked").val() == "autoRefresh") {
                    element.innerHTML = "Set Team #";
                } else {
                    element.innerHTML = "Refresh";
                }
            }
            
            setInterval(doAutoRefresh, 1000);
            setInterval(doUpdateRefreshButton, 10);
        </script>
        
    </head>
    
    <body>
        
        <div class="settingsArea" style="font-size: small">
            API Key: <input type="text" name="apiKeyBox"> <button onclick="setApiKey()" id="apiSetter">Set API Key</button><br>
            Team No: <input type="number" name="teamBox"> <button onclick="doRefresh()" id="teamSetter">Refresh</button><br>
            <i>This key (and the team number) will be saved in a cookie for further use.</i>
        </div>
        
        <br><br>
        
        <div class="dataArea" style="font-size: medium">
            <b>API Status:</b> <span id="apiStatus">[No data yet]</span><br>
            <b>Team Name:</b> <span id="teamName"></span><br>
            <b>Current Event:</b> <span id="currentEvent"></span>
        </div>
        
        <br><br>
        
        <div class="timeArea" style="font-size: small">
            <b>Last Updated:</b> <span id="lastUpdated"><i>Never</i></span><br>
            <input type="checkbox" class="autoRefresh" value="autoRefresh"> Auto-Refresh
        </div>
    
    </body>
    
</html>